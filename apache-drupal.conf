
<VirtualHost *:80>
  ServerName localhost
  ServerAlias mag08xl.to.infn.it

  DocumentRoot "/drupal-data"
  DirectoryIndex /index.php index.php

  <IfModule proxy_module>
      ProxyPassMatch ^/(.*\.php(/.*)?)$ unix:/sock/docker-php.sock|fcgi://php:9000/drupal-data/
      ProxyTimeout 300
  </IfModule>

</VirtualHost>

<VirtualHost *:443>
  ServerName localhost:443
  ServerAlias mag08xl.to.infn.it:443

  DocumentRoot "/drupal-data"

  <IfModule proxy_module>
      ProxyPassMatch ^/(.*\.php(/.*)?)$ unix:/sock/docker-php.sock|fcgi://php:9000/drupal-data/
      ProxyTimeout 300
  </IfModule>

  <IfModule ssl_module>
      SSLEngine on
      SSLCertificateFile /cert/server.crt
      SSLCertificateKeyFile /cert/server.key
      SSLVerifyClient none

      <FilesMatch "\.(cgi|shtml|phtml|php)$">
          SSLOptions +StdEnvVars
      </FilesMatch>
      <Directory "/var/www/localhost/cgi-bin">
          SSLOptions +StdEnvVars
      </Directory>
  </IfModule>

</VirtualHost>